function memeone_load_image(){function a(){e=new Image;e.onload=d;e.src=k.result}function d(){h.width=e.width;h.height=e.height;b(function(){h.style.position="inherit";h.style.display="block";document.getElementById("memeone_generator_form").style.display="block";c.style.display="none"})}function b(a){h.getContext("2d").drawImage(e,0,0);var b=new Image;b.id="memeone_background_picture";b.src=h.toDataURL();b.style.display="none";for(var c=document.getElementById("memeone_meme_placeholder");c.firstChild;)c.removeChild(c.firstChild);
c.insertBefore(b,c.firstChild);a()}var c=document.getElementById("memeone_loading_icon");c.style.display="inline";var h=document.getElementById("memeone_canvas");h.getContext("2d");h.style.display="none";var g,k,e;if("function"!==typeof window.FileReader)memeone_print("Hey, Your browser seems out of date.");else if(g=document.getElementById("memeone_imgfile"))if(g.files)if(g.files[0])if(g.files[0].type.match("image.*"))document.getElementById("memeone_error_message_area").style.display="none",g=g.files[0],
k=new FileReader,k.onload=a,k.readAsDataURL(g);else{c.style.display="none";memeone_print("This is not am image. Please select an image file.");for(g=document.getElementById("memeone_meme_placeholder");g.firstChild;)g.removeChild(g.firstChild);document.getElementById("memeone_generator_form").style.display="none"}else c.style.display="none",memeone_print("Please select a file first.");else c.style.display="none",memeone_print("Hey, Your browser seems out of date.");else c.style.display="none",memeone_print("Um, it seems that there is no file input element.")}
function memeone_print(a){for(var d=document.getElementById("memeone_error_message_area");d.firstChild;)d.removeChild(d.firstChild);var b=document.createElement("p");b.innerHTML=a;d.appendChild(b);d.style.display="block"}
function memeone_type_text(){var a=document.getElementById("memeone_canvas"),d=a.getContext("2d"),b=document.getElementById("memeone_background_picture"),c=parseInt(document.getElementById("memeone_top_text_font_size").value),h=parseInt(document.getElementById("memeone_bottom_text_font_size").value);memeone_clear_canvas(a,d,function(d){memeone_draw_background(d,b,function(d){memeone_type_top_text(a,d,b,c,function(c){memeone_type_bottom_text(a,c,b,h)})})})}
function memeone_preload_image_to_canvas(){var a=document.getElementById("memeone_canvas"),d=a.getContext("2d"),b=document.getElementById("memeone_background_picture");a.width=b.width;a.height=b.height;memeone_draw_background(d,b,function(){a.style.display="block";a.style.position="inherit";b.style.display="none"})}function memeone_clear_canvas(a,d,b){d.clearRect(0,0,a.width,a.height);b(d)}function memeone_draw_background(a,d,b){a.drawImage(d,0,0);b(a)}
function memeone_type_top_text(a,d,b,c,h){var g=document.getElementById("memeone_meme_top_text");b=b.width;var k=c+c/10;b-=Math.round(b/8);var e=c/15;d.font=c.toString()+"px MemeoneFont";memeone_wrap_text(d,g.value.toUpperCase(),a.width/2,c+c/6,b,k,e,c);h(d)}
function memeone_type_bottom_text(a,d,b,c){var h=document.getElementById("memeone_meme_bottom_text");b=b.width;var g=c+c/10,k=b-Math.round(b/8),e=c/15;d.measureText(h.value.toUpperCase());d.font=c.toString()+"px MemeoneFont";memeone_count_lines(d,h.value.toUpperCase(),k,function(b){memeone_wrap_text(d,h.value.toUpperCase(),a.width/2,a.height-c/3-g*b,k,g,e,c)})}
function memeone_count_lines(a,d,b,c){d=d.split(" ");for(var h=1,g="",k=0;k<d.length;k++)g=g+d[k]+" ",a.measureText(g).width>b&&0<k&&(g=d[k]+" ",h+=1);c(h-1)}
function memeone_wrap_text(a,d,b,c,h,g,k,e){d=d.split(" ");e="";a.textAlign="center";a.fillStyle="white";for(var l=0;l<d.length;l++){var f=e+d[l]+" ";a.measureText(f).width>h&&0<l?(a.lineWidth=k,f=k-2,a.strokeText(e,b+f,c-f),a.strokeText(e,b+f,c),a.strokeText(e,b-f,c),a.strokeText(e,b-f,c+f),a.strokeText(e,b-f,c-f),a.strokeText(e,b+f,c+f),a.lineWidth=1,a.fillText(e,b,c),e=d[l]+" ",c+=g):e=f}a.lineWidth=k;f=k-2;a.strokeText(e,b+f,c);a.strokeText(e,b-f,c);a.strokeText(e,b+f,c-f);a.strokeText(e,b-f,
c+f);a.strokeText(e,b-f,c-f);a.strokeText(e,b+f,c+f);a.lineWidth=1;a.fillText(e,b,c)}function memeone_submit_meme(){var a=document.getElementById("memeone_meme_top_text").value,d=document.getElementById("memeone_meme_bottom_text").value;0==a.trim().length&&0==d.trim().length?memeone_print("Please enter text first."):(document.getElementById("memeone_created_meme").value=document.getElementById("memeone_canvas").toDataURL("image/jpeg"),document.forms.memeone_generator_form.submit())};